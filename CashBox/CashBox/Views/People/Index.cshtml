@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "People List";
}

<div class="content-wrapper">
    <div class="row">
        <div class="col-12 grid-margin">
            <div class="card">
                <div class="card-body">
                    <div class="col-lg-12 grid-margin stretch-card">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">LIST OF REGISTERED PEOPLE</h4>
                                <button style="float: right" type="button" class="btn btn-inverse-primary btn-fw" data-toggle="modal" data-target="#createMemeber">Add Record to List</button>
                                @*<br /><br />
                                <button style="float: right" id ="load" type="button" class="btn btn-inverse-primary btn-fw">Load Record Information</button>*@
                                <br /><br />
                                <div class="table-responsive" id="list">
                                    @Html.Partial("_List")
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<div id="divFormCreate">
    @Html.Partial("_Create", new CashBoxModel.People())
</div>
<div id="divFormEdit">
        @Html.Partial("_Edit", new CashBoxModel.People())
    </div>
    <div id="divFormDelete" style="display: none">
        @Html.Partial("_Delete", new CashBoxModel.People())
    </div>
<script type="text/javascript">
        $(document).ready(function () {
            $('#example').DataTable();
        });

        function isNumber(evt) {
            evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }
            return true;
        }

        function readFile() {
            if (this.files && this.files[0]) {
                var FR = new FileReader();
                FR.addEventListener("load", function (e) {
                    $('#profileImg').val(e.target.result);
                });

                FR.readAsDataURL(this.files[0]);
            }
        }
        document.getElementById("imgUpload").addEventListener("change", readFile);

        function eReadFile() {
            if (this.files && this.files[0]) {
                var FR = new FileReader();
                FR.addEventListener("load", function (e) {
                    $('#eprofileImg').val(e.target.result);
                });

                FR.readAsDataURL(this.files[0]);
            }
        }
        document.getElementById("eimgUpload").addEventListener("change", eReadFile);
        function loadDetails(id) {
            $.ajax({
                url: '@Url.Action("_LoadEdit", "People")',
                method: "POST",
                cache: false,
                data: { id: id },
                success: function (member) {
                    $('#txtID').val(member.ID);
                    $('#mFirstName').val(member.FirstName);
                    $('#mSurname').val(member.Surname);
                    var dob = moment(member.DateOfBirth).format('DD-MM-YYYY');
                    $('#mDateOfBirth').val(dob); //
                    $('#mAge').val(member.Age); // Weight
                    $('#mHeight').val(member.Height);
                    $('#mWeight').val(member.Weight);
                    $('#mHairColour').val(member.HairColour);
                },
                error: function () {
                    alert('Unable to fetch member record.');
                }
            });
        }

        function ShowDeletePopUp(id) {
            $('#txtDeleteID').val(id);
            $('#btnDelete').click();
        }

        function Begin() {

        }

        function Successful() {
            $('#closeCreate').click();
            alert('New member added successfully.');
            $('#example').DataTable();
        }

        function UpdateBegin() {

        }

        function UpdateSuccessful() {
            $('#closeEdit').click();
            alert('Member record updated successfully.');
            $('#example').DataTable();
        }

        function DeleteBegin() {

        }

        function DeleteSuccessful() {
            alert('Member record deleted successfully.');
            $('#example').DataTable();
        }

        function Failed() {
            alert('Operation failed.');
        }

        @*$('#load').click(function () {
            $.ajax({
                url: "@Url.Action("LoadData", "People")",
                type: "GET",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (result) {
                    $('#example tbody').empty();
                    var SN = 1;

                    $.each(result, function (key, item) {
                        var tableRow = '<tr><td>' + SN +
                            '</td><td>' + item.Surname +
                            '</td><td>' + item.FirstName +
                            '</td><td>' + item.DateOfBirth +
                            '</td><td>' + item.Age +
                            '</td><td>' + item.Height +
                            '</td><td>' + item.HairColour +                            
                            '</td><td>' + item.Weight +
                            
                            '</td><td><a href="#" onclick="return getbyID(' + item.ID +
                            ')">Edit</a> | <a href="#" onclick="Delele(' + item.ID + ')">Delete</a></td></tr>';

                        $('#User tbody').append(tableRow);
                        itemNo++;
                    });

                    $('#User').DataTable();


                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        });*@

       
</script>
